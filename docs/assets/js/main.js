"use strict";let dataSeries=[];const button=document.querySelector(".js-btn");let ulList=document.querySelector(".js-movies-list");function findTvShow(){const e=document.querySelector(".js-input").value;dataSeries=[],fetch("//api.tvmaze.com/search/shows?q="+e).then(e=>e.json()).then(e=>{for(const t of e)dataSeries.push(t.show);paintTvShow()})}function paintTvShow(){let e="";dataSeries.forEach(t=>{let i="";i=null===t.image?"https://via.placeholder.com/210x295/ffffff/666666/?text=TV":t.image.medium;const s=favoriteSeries.find(e=>e.id===t.id);console.log(t.name,s),void 0===s?(e+=`<li data-id="${t.id}" class= "js-poster"> <img src= "${i}">`,e+=`<img${t.name}>`):(e+=`<li data-id="${t.id}" class= "js-poster favorite"> <img src= "${i}">`,e+=`<img${t.name}>`,e+="</li>")}),ulList.innerHTML=e,allListenersToSeries()}button.addEventListener("click",findTvShow);let favoriteSeries=[],ulListFavorites=document.querySelector(".js-favorites-list");function handleClickSeries(e){const t=parseInt(e.currentTarget.dataset.id);console.log("Favoritos antes",favoriteSeries);if(void 0===favoriteSeries.find(e=>e.id===clicedSerieId)){const e=dataSeries.find(e=>e.id===t);favoriteSeries.push(e)}else favoriteSeries=favoriteSeries.filter(e=>e.id!==t);setData(),paintFavorites(),paintTvShow(),console.log("Favoritos despues",favoriteSeries)}function paintFavorites(){let e="";for(let t=0;t<favoriteSeries.length;t++)e+=`<li class="favorite-item" id="${favoriteSeries[t].id}">`,e+=`<h2 class="favorite-name">${favoriteSeries[t].name}</h2>`,null===favoriteSeries[t].image?e+="<img class=\"favorite-image\" src='https://via.placeholder.com/210x295/ffffff/666666/?text=TV';/>":e+=`<img class="favorite-image" src="${favoriteSeries[t].image.medium}"/>`,e+="</li>";ulListFavorites.innerHTML=e}function allListenersToSeries(){const e=document.querySelectorAll(".js-poster");for(const t of e)t.addEventListener("click",handleClickSeries)}console.log(favoriteSeries);const setData=()=>{console.log("guardando en ls");const e=JSON.stringify(favoriteSeries);localStorage.setItem("favorites",e)},getData=()=>{const e=localStorage.getItem("favorites");null!==e&&(favoriteSeries=JSON.parse(e),paintFavorites())};getData();